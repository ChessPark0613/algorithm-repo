# README.md

## Gosper's Hack — 개인 정리

### 1. 문제 정의

n개의 원소 중에서 정확히 k개를 고르는 모든 조합을 만드는 방법. 즉, $\binom{n}{k}$ 개의 조합을 만들어야 하는데, 이걸 비트마스크로 표현하면 1의 개수가 k개인 n비트 수열을 전부 생성하는 문제가 된다.

예를 들어 n=6, k=3이면 `000111`, `001011`, ..., `111000` 총 20개가 만들어진다.

---

### 2. 기본 아이디어

단순하게는 0부터 2^n-1까지 다 돌면서 popcount가 k인 경우만 뽑으면 되지만, 그건 효율적이지 않다. Gosper's Hack은 현재 마스크에서 바로 다음 마스크를 O(1) 연산으로 얻는 방법이다.

---

### 3. 핵심 연산

현재 마스크를 s라 할 때:

1. c = s & -s  → s의 최하위 1비트 추출
2. r = s + c   → 그 비트를 올리면서 캐리 전파
3. 다음 마스크 공식:

   $$
   s = (((r \oplus s) >> 2) / c) | r
   $$

   * r ^ s : 바뀐 영역
   * > > 2 : 피벗 비트와 그 아래를 제거
   * / c : 나머지 1들을 오른쪽으로 이동
   * \| r : 새로 올라간 비트와 합치기

---

### 4. 예시 (n=6, k=3)

시작: 000111

1. 000111 → {1,2,3}
2. 001011 → {1,2,4}
3. 001101 → {1,3,4}
4. 001110 → {2,3,4}
   ...
5. 111000 → {4,5,6}

총 20개로, 조합 수 $\binom{6}{3} = 20$과 일치한다.

---

### 5. 성질

* 한 번에 덧셈, AND, XOR, 시프트, 나눗셈만으로 다음 마스크를 얻는다.
* 순서는 사전순 증가.
* 전체 시간 복잡도는 $O(\binom{n}{k})$, 각 단계는 O(1).
* 추가 메모리는 O(1).

---

### 6. 내 요약

결국 핵심은 “가장 낮은 1을 왼쪽으로 올리고, 나머지 1들을 가능한 오른쪽에 붙인다”는 규칙이다. 이 간단한 규칙 덕분에 조합을 빠르게 생성할 수 있다.
